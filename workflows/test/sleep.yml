apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: test-amd64-
spec:
  entrypoint: amd64-test
  templates:
    - name: amd64-test
      nodeSelector:
        karpenter.sh/capacity-type: "spot"
        # kubernetes.io/arch: "amd6464"
      tolerations:
        # - key: kubernetes.io/arch
        #   operator: Equal
        #   effect: NoSchedule
        #   value: arm64
        - key: karpenter.sh/capacity-type
          operator: Equal
          value: spot
          effect: NoSchedule

      container:
        resources:
          requests:
            memory: 3.9Gi
            cpu: 2000m
        image: public.ecr.aws/ubuntu/ubuntu:22.04
        command: ["echo", "hello"]
