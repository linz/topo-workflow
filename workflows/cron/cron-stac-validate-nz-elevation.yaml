# yaml-language-server: $schema=https://raw.githubusercontent.com/argoproj/argo-workflows/v3.5.5/api/jsonschema/schema.json
apiVersion: argoproj.io/v1alpha1
kind: CronWorkflow
metadata:
  name: cron-stac-validate-nz-elevation
  labels:
    linz.govt.nz/category: stac
spec:
  schedule: '0 07 * * *' # 7 AM every day
  timezone: 'NZ'
  startingDeadlineSeconds: 3600 # Allow 1 hour delay if the workflow-controller clashes during the starting time.
  concurrencyPolicy: 'Allow'
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 3
  suspend: false
  workflowSpec:
    workflowTemplateRef:
      name: tpl-at-stac-validate
    entrypoint: main
    arguments:
      parameters:
        - name: 'uri'
          value: 's3://nz-elevation/'
        - name: 'checksum_assets'
          value: 'false'
        - name: 'checksum_links'
          value: 'true'
---
apiVersion: argoproj.io/v1alpha1
kind: CronWorkflow
metadata:
  name: cron-stac-validate-nz-elevation-all-checksums
  labels:
    linz.govt.nz/category: stac
spec:
  schedule: '0 07 1 * *' # 7 AM every 1st of the month 
  timezone: 'NZ'
  startingDeadlineSeconds: 3600 # Allow 1 hour delay if the workflow-controller clashes during the starting time.
  concurrencyPolicy: 'Allow'
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 3
  suspend: false
  workflowSpec:
    workflowTemplateRef:
      name: stac-validate-parallel
    arguments:
      parameters:
        - name: 'uri'
          value: 's3://nz-elevation/'
        - name: 'checksum_assets'
          value: 'true'
        - name: 'checksum_links'
          value: 'true'
